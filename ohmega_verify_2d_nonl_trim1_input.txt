ohmega
bidirectional
run /bin/umodem mult_nonl.2d __END_MULT_NONL__
,..............................|....................................,
:plus                          |                                    :
:  *==================*        |                                    :
-->!send [(W,S),(W,E)]!--------#--------------------+               :
:  *==================*        |                    |               :
:         |                    |                    |               :
:         |                    v                    v               :
:         |                 *==============*    *============*      :
:         |                 !case N of S, E!--->!send [(N,E)]!-------
:         |                 *==============*    *============*      :
:         |                        |                                :
:         |                        v                                :
:         |                    *========*       *================*  :
:         +------------------->!use plus!------>!send [(Inl W,E)]!---
:                              *========*       *================*  :
,...................................................................,
,.................................|............................................,
:mult                             |                                            :
: *==================*            |                                            :
->!send [(W,S),(W,E)]!------------#---------------+                            :
: *==================*            |               |                            :
:         |                       v               |                            :
:         |                   *==============*    |                            :
:         |                   !case N of S, E!----#---+                        :
:         |                   *==============*    |   |                        :
:         |                       |               |   v                        :
:         |                       |               | *================*         :
:         |                       v               | !send [(Inr N,E)]!----------
:         |                   *========*          | *================*         :
:         +------------------>!use mult!+         |                            :
:                             *========*|     +---+                            :
:                                       |     v                                :
:                                       | *========*                           :
:                                       +>!use plus!----------------------------
:                                         *========*                           :
,..............................................................................,__END_MULT_NONL__
run /bin/umodem rev_nonl.2d __END_REV_NONL__
,.................................|......................................................,
:revacc0                          |                                                      :
: *==================*+-----------#-----------------------+                              :
->!send [(W,S),(W,E)]!+           v                       |                              :
: *==================*        *==============*+-----------#---+                          :
:         |                   !case N of S, E!+           |   |                          :
:         |                   *==============*            |   v                          :
:         |                       |                       | *============*               :
:         |                       v                       +>!send [(W,E)]!----------------
:         |                   *=======*                     *============*               :
:         |                   !split N!+                                                 :
:         |                   *=======*+------------------------+                        :
:         |                       |                             |                        :
:         |                       v                             v                        :
:         |                   *====================*        *===========*                :
:         +------------------>!send [(Inl (N,W),E)]!------->!use revacc0!-----------------
:                             *====================*        *===========*                :
,........................................................................................,
,.................................|......................................................,
:rev                              |                                                      :
:                                 |                                                      :
:                                 v                                                      :
: *=================*         *===========*                                              :
: !send [(Inr (),E)]!-------->!use revacc0!-----------------------------------------------
: *=================*         *===========*                                              :
,........................................................................................,__END_REV_NONL__
verify mult mult_nonl.2d
verify rev rev_nonl.2d
